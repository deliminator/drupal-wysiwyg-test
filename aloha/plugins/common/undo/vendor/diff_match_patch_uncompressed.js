/**
 * Diff Match and Patch
 *
 * Copyright 2006 Google Inc.
 * http://code.google.com/p/google-diff-match-patch/
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function e(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}function i(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}var t=-1,n=1,r=0;e.Diff,e.prototype.diff_main=function(e,t,n,i){typeof i=="undefined"&&(this.Diff_Timeout<=0?i=Number.MAX_VALUE:i=(new Date).getTime()+this.Diff_Timeout*1e3);var s=i;if(e==null||t==null)throw new Error("Null input. (diff_main)");if(e==t)return e?[[r,e]]:[];typeof n=="undefined"&&(n=!0);var o=n,u=this.diff_commonPrefix(e,t),a=e.substring(0,u);e=e.substring(u),t=t.substring(u),u=this.diff_commonSuffix(e,t);var f=e.substring(e.length-u);e=e.substring(0,e.length-u),t=t.substring(0,t.length-u);var l=this.diff_compute_(e,t,o,s);return a&&l.unshift([r,a]),f&&l.push([r,f]),this.diff_cleanupMerge(l),l},e.prototype.diff_compute_=function(e,i,s,o){var u;if(!e)return[[n,i]];if(!i)return[[t,e]];var a=e.length>i.length?e:i,f=
e.length>i.length?i:e,l=a.indexOf(f);if(l!=-1)return u=[[n,a.substring(0,l)],[r,f],[n,a.substring(l+f.length)]],e.length>i.length&&(u[0][0]=u[2][0]=t),u;if(f.length==1)return[[t,e],[n,i]];a=f=null;var c=this.diff_halfMatch_(e,i);if(c){var h=c[0],p=c[1],d=c[2],v=c[3],m=c[4],g=this.diff_main(h,d,s,o),y=this.diff_main(p,v,s,o);return g.concat([[r,m]],y)}return s&&e.length>100&&i.length>100?this.diff_lineMode_(e,i,o):this.diff_bisect_(e,i,o)},e.prototype.diff_lineMode_=function(e,i,s){var o=this.diff_linesToChars_(e,i);e=o[0],i=o[1];var u=o[2],a=this.diff_bisect_(e,i,s);this.diff_charsToLines_(a,u),this.diff_cleanupSemantic(a),a.push([r,""]);var f=0,l=0,c=0,h="",p="";while(f<a.length){switch(a[f][0]){case n:c++,p+=a[f][1];break;case t:l++,h+=a[f][1];break;case r:if(l>=1&&c>=1){var o=this.diff_main(h,p,!1,s);a.splice(f-l-c,l+c),f=f-l-c;for(var d=o.length-1;d>=0;d--)a.splice(f,0,o[d]);f+=o.length}c=0,l=0,h="",p=""}f++}return a.pop(),a},e.prototype.diff_bisect_=function(e,r,i){var s=e.length,o=
r.length,u=Math.ceil((s+o)/2),a=u,f=2*u,l=new Array(f),c=new Array(f);for(var h=0;h<f;h++)l[h]=-1,c[h]=-1;l[a+1]=0,c[a+1]=0;var p=s-o,d=p%2!=0,v=0,m=0,g=0,y=0;for(var b=0;b<u;b++){if((new Date).getTime()>i)break;for(var w=-b+v;w<=b-m;w+=2){var E=a+w,S;w==-b||w!=b&&l[E-1]<l[E+1]?S=l[E+1]:S=l[E-1]+1;var x=S-w;while(S<s&&x<o&&e.charAt(S)==r.charAt(x))S++,x++;l[E]=S;if(S>s)m+=2;else if(x>o)v+=2;else if(d){var T=a+p-w;if(T>=0&&T<f&&c[T]!=-1){var N=s-c[T];if(S>=N)return this.diff_bisectSplit_(e,r,S,x,i)}}}for(var C=-b+g;C<=b-y;C+=2){var T=a+C,N;C==-b||C!=b&&c[T-1]<c[T+1]?N=c[T+1]:N=c[T-1]+1;var k=N-C;while(N<s&&k<o&&e.charAt(s-N-1)==r.charAt(o-k-1))N++,k++;c[T]=N;if(N>s)y+=2;else if(k>o)g+=2;else if(!d){var E=a+p-C;if(E>=0&&E<f&&l[E]!=-1){var S=l[E],x=a+S-E;N=s-N;if(S>=N)return this.diff_bisectSplit_(e,r,S,x,i)}}}}return[[t,e],[n,r]]},e.prototype.diff_bisectSplit_=function(e,t,n,r,i){var s=e.substring(0,n),o=t.substring(0,r),u=e.substring(n),a=t.substring(r),f=this.diff_main(s,o,!1,i),l=this.
diff_main(u,a,!1,i);return f.concat(l)},e.prototype.diff_linesToChars_=function(e,t){function i(e){var t="",i=0,s=-1,o=n.length;while(s<e.length-1){s=e.indexOf("\n",i),s==-1&&(s=e.length-1);var u=e.substring(i,s+1);i=s+1,(r.hasOwnProperty?r.hasOwnProperty(u):r[u]!==undefined)?t+=String.fromCharCode(r[u]):(t+=String.fromCharCode(o),r[u]=o,n[o++]=u)}return t}var n=[],r={};n[0]="";var s=i(e),o=i(t);return[s,o,n]},e.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){var r=e[n][1],i=[];for(var s=0;s<r.length;s++)i[s]=t[r.charCodeAt(s)];e[n][1]=i.join("")}},e.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;var n=0,r=Math.min(e.length,t.length),i=r,s=0;while(n<i)e.substring(s,i)==t.substring(s,i)?(n=i,s=n):r=i,i=Math.floor((r-n)/2+n);return i},e.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;var n=0,r=Math.min(e.length,t.length),i=r,s=0;while(n<i)e.substring(e.length-i,e.length-
s)==t.substring(t.length-i,t.length-s)?(n=i,s=n):r=i,i=Math.floor((r-n)/2+n);return i},e.prototype.diff_commonOverlap_=function(e,t){var n=e.length,r=t.length;if(n==0||r==0)return 0;n>r?e=e.substring(n-r):n<r&&(t=t.substring(0,n));var i=Math.min(n,r);if(e==t)return i;var s=0,o=1;for(;;){var u=e.substring(i-o),a=t.indexOf(u);if(a==-1)return s;o+=a;if(a==0||e.substring(i-o)==t.substring(0,o))s=o,o++}},e.prototype.diff_halfMatch_=function(e,t){function s(e,t,n){var r=e.substring(n,n+Math.floor(e.length/4)),s=-1,o="",u,a,f,l;while((s=t.indexOf(r,s+1))!=-1){var c=i.diff_commonPrefix(e.substring(n),t.substring(s)),h=i.diff_commonSuffix(e.substring(0,n),t.substring(0,s));o.length<h+c&&(o=t.substring(s-h,s)+t.substring(s,s+c),u=e.substring(0,n-h),a=e.substring(n+c),f=t.substring(0,s-h),l=t.substring(s+c))}return o.length*2>=e.length?[u,a,f,l,o]:null}if(this.Diff_Timeout<=0)return null;var n=e.length>t.length?e:t,r=e.length>t.length?t:e;if(n.length<4||r.length*2<n.length)return null;var i=this,o=
s(n,r,Math.ceil(n.length/4)),u=s(n,r,Math.ceil(n.length/2)),a;if(!o&&!u)return null;u?o?a=o[4].length>u[4].length?o:u:a=u:a=o;var f,l,c,h;e.length>t.length?(f=a[0],l=a[1],c=a[2],h=a[3]):(c=a[0],h=a[1],f=a[2],l=a[3]);var p=a[4];return[f,l,c,h,p]},e.prototype.diff_cleanupSemantic=function(e){var i=!1,s=[],o=0,u=null,a=0,f=0,l=0,c=0,h=0;while(a<e.length)e[a][0]==r?(s[o++]=a,f=c,l=h,c=0,h=0,u=e[a][1]):(e[a][0]==n?c+=e[a][1].length:h+=e[a][1].length,u!==null&&u.length<=Math.max(f,l)&&u.length<=Math.max(c,h)&&(e.splice(s[o-1],0,[t,u]),e[s[o-1]+1][0]=n,o--,o--,a=o>0?s[o-1]:-1,f=0,l=0,c=0,h=0,u=null,i=!0)),a++;i&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),a=1;while(a<e.length){if(e[a-1][0]==t&&e[a][0]==n){var p=e[a-1][1],d=e[a][1],v=this.diff_commonOverlap_(p,d);v&&(e.splice(a,0,[r,d.substring(0,v)]),e[a-1][1]=p.substring(0,p.length-v),e[a+1][1]=d.substring(v),a++),a++}a++}},e.prototype.diff_cleanupSemanticLossless=function(e){function u(e,r){if(!e||!r)return 5;var u=0;if(e.
charAt(e.length-1).match(t)||r.charAt(0).match(t)){u++;if(e.charAt(e.length-1).match(n)||r.charAt(0).match(n)){u++;if(e.charAt(e.length-1).match(i)||r.charAt(0).match(i))u++,(e.match(s)||r.match(o))&&u++}}return u}var t=/[^a-zA-Z0-9]/,n=/\s/,i=/[\r\n]/,s=/\n\r?\n$/,o=/^\r?\n\r?\n/,a=1;while(a<e.length-1){if(e[a-1][0]==r&&e[a+1][0]==r){var f=e[a-1][1],l=e[a][1],c=e[a+1][1],h=this.diff_commonSuffix(f,l);if(h){var p=l.substring(l.length-h);f=f.substring(0,f.length-h),l=p+l.substring(0,l.length-h),c=p+c}var d=f,v=l,m=c,g=u(f,l)+u(l,c);while(l.charAt(0)===c.charAt(0)){f+=l.charAt(0),l=l.substring(1)+c.charAt(0),c=c.substring(1);var y=u(f,l)+u(l,c);y>=g&&(g=y,d=f,v=l,m=c)}e[a-1][1]!=d&&(d?e[a-1][1]=d:(e.splice(a-1,1),a--),e[a][1]=v,m?e[a+1][1]=m:(e.splice(a+1,1),a--))}a++}},e.prototype.diff_cleanupEfficiency=function(e){var i=!1,s=[],o=0,u="",a=0,f=!1,l=!1,c=!1,h=!1;while(a<e.length)e[a][0]==r?(e[a][1].length<this.Diff_EditCost&&(c||h)?(s[o++]=a,f=c,l=h,u=e[a][1]):(o=0,u=""),c=h=!1):(e[a][0]==
t?h=!0:c=!0,u&&(f&&l&&c&&h||u.length<this.Diff_EditCost/2&&f+l+c+h==3)&&(e.splice(s[o-1],0,[t,u]),e[s[o-1]+1][0]=n,o--,u="",f&&l?(c=h=!0,o=0):(o--,a=o>0?s[o-1]:-1,c=h=!1),i=!0)),a++;i&&this.diff_cleanupMerge(e)},e.prototype.diff_cleanupMerge=function(e){e.push([r,""]);var i=0,s=0,o=0,u="",a="",f;while(i<e.length)switch(e[i][0]){case n:o++,a+=e[i][1],i++;break;case t:s++,u+=e[i][1],i++;break;case r:s+o>1?(s!==0&&o!==0&&(f=this.diff_commonPrefix(a,u),f!==0&&(i-s-o>0&&e[i-s-o-1][0]==r?e[i-s-o-1][1]+=a.substring(0,f):(e.splice(0,0,[r,a.substring(0,f)]),i++),a=a.substring(f),u=u.substring(f)),f=this.diff_commonSuffix(a,u),f!==0&&(e[i][1]=a.substring(a.length-f)+e[i][1],a=a.substring(0,a.length-f),u=u.substring(0,u.length-f))),s===0?e.splice(i-s-o,s+o,[n,a]):o===0?e.splice(i-s-o,s+o,[t,u]):e.splice(i-s-o,s+o,[t,u],[n,a]),i=i-s-o+(s?1:0)+(o?1:0)+1):i!==0&&e[i-1][0]==r?(e[i-1][1]+=e[i][1],e.splice(i,1)):i++,o=0,s=0,u="",a=""}e[e.length-1][1]===""&&e.pop();var l=!1;i=1;while(i<e.length-1)e[i-1][0
]==r&&e[i+1][0]==r&&(e[i][1].substring(e[i][1].length-e[i-1][1].length)==e[i-1][1]?(e[i][1]=e[i-1][1]+e[i][1].substring(0,e[i][1].length-e[i-1][1].length),e[i+1][1]=e[i-1][1]+e[i+1][1],e.splice(i-1,1),l=!0):e[i][1].substring(0,e[i+1][1].length)==e[i+1][1]&&(e[i-1][1]+=e[i+1][1],e[i][1]=e[i][1].substring(e[i+1][1].length)+e[i+1][1],e.splice(i+1,1),l=!0)),i++;l&&this.diff_cleanupMerge(e)},e.prototype.diff_xIndex=function(e,r){var i=0,s=0,o=0,u=0,a;for(a=0;a<e.length;a++){e[a][0]!==n&&(i+=e[a][1].length),e[a][0]!==t&&(s+=e[a][1].length);if(i>r)break;o=i,u=s}return e.length!=a&&e[a][0]===t?u:u+(r-o)},e.prototype.diff_prettyHtml=function(e){var i=[],s=0,o=/&/g,u=/</g,a=/>/g,f=/\n/g;for(var l=0;l<e.length;l++){var c=e[l][0],h=e[l][1],p=h.replace(o,"&amp;").replace(u,"&lt;").replace(a,"&gt;").replace(f,"&para;<br>");switch(c){case n:i[l]='<ins style="background:#e6ffe6;">'+p+"</ins>";break;case t:i[l]='<del style="background:#ffe6e6;">'+p+"</del>";break;case r:i[l]="<span>"+p+"</span>"}c!==t&&
(s+=h.length)}return i.join("")},e.prototype.diff_text1=function(e){var t=[];for(var r=0;r<e.length;r++)e[r][0]!==n&&(t[r]=e[r][1]);return t.join("")},e.prototype.diff_text2=function(e){var n=[];for(var r=0;r<e.length;r++)e[r][0]!==t&&(n[r]=e[r][1]);return n.join("")},e.prototype.diff_levenshtein=function(e){var i=0,s=0,o=0;for(var u=0;u<e.length;u++){var a=e[u][0],f=e[u][1];switch(a){case n:s+=f.length;break;case t:o+=f.length;break;case r:i+=Math.max(s,o),s=0,o=0}}return i+=Math.max(s,o),i},e.prototype.diff_toDelta=function(e){var i=[];for(var s=0;s<e.length;s++)switch(e[s][0]){case n:i[s]="+"+encodeURI(e[s][1]);break;case t:i[s]="-"+e[s][1].length;break;case r:i[s]="="+e[s][1].length}return i.join("	").replace(/%20/g," ")},e.prototype.diff_fromDelta=function(e,i){var s=[],o=0,u=0,a=i.split(/\t/g);for(var f=0;f<a.length;f++){var l=a[f].substring(1);switch(a[f].charAt(0)){case"+":try{s[o++]=[n,decodeURI(l)]}catch(c){throw new Error("Illegal escape in diff_fromDelta: "+l)}break;case"-":
case"=":var h=parseInt(l,10);if(isNaN(h)||h<0)throw new Error("Invalid number in diff_fromDelta: "+l);var p=e.substring(u,u+=h);a[f].charAt(0)=="="?s[o++]=[r,p]:s[o++]=[t,p];break;default:if(a[f])throw new Error("Invalid diff operation in diff_fromDelta: "+a[f])}}if(u!=e.length)throw new Error("Delta length ("+u+") does not equal source text length ("+e.length+").");return s},e.prototype.match_main=function(e,t,n){if(e==null||t==null||n==null)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},e.prototype.match_bitap_=function(e,t,n){function s(e,r){var s=e/t.length,o=Math.abs(n-r);return i.Match_Distance?s+o/i.Match_Distance:o?1:s}if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(t),i=this,o=this.Match_Threshold,u=e.indexOf(t,n);u!=-1&&(o=Math.min(s(0,u),o),u=e.lastIndexOf(t,n+t.length),u!=-1&&(o=Math.min(s(0,u),o)))
;var a=1<<t.length-1;u=-1;var f,l,c=t.length+e.length,h;for(var p=0;p<t.length;p++){f=0,l=c;while(f<l)s(p,n+l)<=o?f=l:c=l,l=Math.floor((c-f)/2+f);c=l;var d=Math.max(1,n-l+1),v=Math.min(n+l,e.length)+t.length,m=Array(v+2);m[v+1]=(1<<p)-1;for(var g=v;g>=d;g--){var y=r[e.charAt(g-1)];p===0?m[g]=(m[g+1]<<1|1)&y:m[g]=(m[g+1]<<1|1)&y|((h[g+1]|h[g])<<1|1)|h[g+1];if(m[g]&a){var b=s(p,g-1);if(b<=o){o=b,u=g-1;if(!(u>n))break;d=Math.max(1,2*n-u)}}}if(s(p+1,n)>o)break;h=m}return u},e.prototype.match_alphabet_=function(e){var t={};for(var n=0;n<e.length;n++)t[e.charAt(n)]=0;for(var n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},e.prototype.patch_addContext_=function(e,t){if(t.length==0)return;var n=t.substring(e.start2,e.start2+e.length1),i=0;while(t.indexOf(n)!=t.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin)i+=this.Patch_Margin,n=t.substring(e.start2-i,e.start2+e.length1+i);i+=this.Patch_Margin;var s=t.substring(e.start2-i,e.start2);s&&e.diffs.unshift
([r,s]);var o=t.substring(e.start2+e.length1,e.start2+e.length1+i);o&&e.diffs.push([r,o]),e.start1-=s.length,e.start2-=s.length,e.length1+=s.length+o.length,e.length2+=s.length+o.length},e.prototype.patch_make=function(e,s,o){var u,a;if(typeof e=="string"&&typeof s=="string"&&typeof o=="undefined")u=e,a=this.diff_main(u,s,!0),a.length>2&&(this.diff_cleanupSemantic(a),this.diff_cleanupEfficiency(a));else if(e&&typeof e=="object"&&typeof s=="undefined"&&typeof o=="undefined")a=e,u=this.diff_text1(a);else if(typeof e=="string"&&s&&typeof s=="object"&&typeof o=="undefined")u=e,a=s;else{if(typeof e!="string"||typeof s!="string"||!o||typeof o!="object")throw new Error("Unknown call format to patch_make.");u=e,a=o}if(a.length===0)return[];var f=[],l=new i,c=0,h=0,p=0,d=u,v=u;for(var m=0;m<a.length;m++){var g=a[m][0],y=a[m][1];!c&&g!==r&&(l.start1=h,l.start2=p);switch(g){case n:l.diffs[c++]=a[m],l.length2+=y.length,v=v.substring(0,p)+y+v.substring(p);break;case t:l.length1+=y.length,l.diffs[c++
]=a[m],v=v.substring(0,p)+v.substring(p+y.length);break;case r:y.length<=2*this.Patch_Margin&&c&&a.length!=m+1?(l.diffs[c++]=a[m],l.length1+=y.length,l.length2+=y.length):y.length>=2*this.Patch_Margin&&c&&(this.patch_addContext_(l,d),f.push(l),l=new i,c=0,d=v,h=p)}g!==n&&(h+=y.length),g!==t&&(p+=y.length)}return c&&(this.patch_addContext_(l,d),f.push(l)),f},e.prototype.patch_deepCopy=function(e){var t=[];for(var n=0;n<e.length;n++){var r=e[n],s=new i;s.diffs=[];for(var o=0;o<r.diffs.length;o++)s.diffs[o]=r.diffs[o].slice();s.start1=r.start1,s.start2=r.start2,s.length1=r.length1,s.length2=r.length2,t[n]=s}return t},e.prototype.patch_apply=function(e,i){if(e.length==0)return[i,[]];e=this.patch_deepCopy(e);var s=this.patch_addPadding(e);i=s+i+s,this.patch_splitMax(e);var o=0,u=[];for(var a=0;a<e.length;a++){var f=e[a].start2+o,l=this.diff_text1(e[a].diffs),c,h=-1;if(l.length>this.Match_MaxBits){c=this.match_main(i,l.substring(0,this.Match_MaxBits),f);if(c!=-1){h=this.match_main(i,l.substring
(l.length-this.Match_MaxBits),f+l.length-this.Match_MaxBits);if(h==-1||c>=h)c=-1}}else c=this.match_main(i,l,f);if(c==-1)u[a]=!1,o-=e[a].length2-e[a].length1;else{u[a]=!0,o=c-f;var p;h==-1?p=i.substring(c,c+l.length):p=i.substring(c,h+this.Match_MaxBits);if(l==p)i=i.substring(0,c)+this.diff_text2(e[a].diffs)+i.substring(c+l.length);else{var d=this.diff_main(l,p,!1);if(l.length>this.Match_MaxBits&&this.diff_levenshtein(d)/l.length>this.Patch_DeleteThreshold)u[a]=!1;else{this.diff_cleanupSemanticLossless(d);var v=0,m;for(var g=0;g<e[a].diffs.length;g++){var y=e[a].diffs[g];y[0]!==r&&(m=this.diff_xIndex(d,v)),y[0]===n?i=i.substring(0,c+m)+y[1]+i.substring(c+m):y[0]===t&&(i=i.substring(0,c+m)+i.substring(c+this.diff_xIndex(d,v+y[1].length))),y[0]!==t&&(v+=y[1].length)}}}}}return i=i.substring(s.length,i.length-s.length),[i,u]},e.prototype.patch_addPadding=function(e){var t=this.Patch_Margin,n="";for(var i=1;i<=t;i++)n+=String.fromCharCode(i);for(var i=0;i<e.length;i++)e[i].start1+=t,e[i].start2+=
t;var s=e[0],o=s.diffs;if(o.length==0||o[0][0]!=r)o.unshift([r,n]),s.start1-=t,s.start2-=t,s.length1+=t,s.length2+=t;else if(t>o[0][1].length){var u=t-o[0][1].length;o[0][1]=n.substring(o[0][1].length)+o[0][1],s.start1-=u,s.start2-=u,s.length1+=u,s.length2+=u}s=e[e.length-1],o=s.diffs;if(o.length==0||o[o.length-1][0]!=r)o.push([r,n]),s.length1+=t,s.length2+=t;else if(t>o[o.length-1][1].length){var u=t-o[o.length-1][1].length;o[o.length-1][1]+=n.substring(0,u),s.length1+=u,s.length2+=u}return n},e.prototype.patch_splitMax=function(e){var s=this.Match_MaxBits;for(var o=0;o<e.length;o++)if(e[o].length1>s){var u=e[o];e.splice(o--,1);var a=u.start1,f=u.start2,l="";while(u.diffs.length!==0){var c=new i,h=!0;c.start1=a-l.length,c.start2=f-l.length,l!==""&&(c.length1=c.length2=l.length,c.diffs.push([r,l]));while(u.diffs.length!==0&&c.length1<s-this.Patch_Margin){var p=u.diffs[0][0],d=u.diffs[0][1];p===n?(c.length2+=d.length,f+=d.length,c.diffs.push(u.diffs.shift()),h=!1):p===t&&c.diffs.length==1&&
c.diffs[0][0]==r&&d.length>2*s?(c.length1+=d.length,a+=d.length,h=!1,c.diffs.push([p,d]),u.diffs.shift()):(d=d.substring(0,s-c.length1-this.Patch_Margin),c.length1+=d.length,a+=d.length,p===r?(c.length2+=d.length,f+=d.length):h=!1,c.diffs.push([p,d]),d==u.diffs[0][1]?u.diffs.shift():u.diffs[0][1]=u.diffs[0][1].substring(d.length))}l=this.diff_text2(c.diffs),l=l.substring(l.length-this.Patch_Margin);var v=this.diff_text1(u.diffs).substring(0,this.Patch_Margin);v!==""&&(c.length1+=v.length,c.length2+=v.length,c.diffs.length!==0&&c.diffs[c.diffs.length-1][0]===r?c.diffs[c.diffs.length-1][1]+=v:c.diffs.push([r,v])),h||e.splice(++o,0,c)}}},e.prototype.patch_toText=function(e){var t=[];for(var n=0;n<e.length;n++)t[n]=e[n];return t.join("")},e.prototype.patch_fromText=function(e){var s=[];if(!e)return s;var o=e.split("\n"),u=0,a=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;while(u<o.length){var f=o[u].match(a);if(!f)throw new Error("Invalid patch string: "+o[u]);var l=new i;s.push(l),l.start1=parseInt
(f[1],10),f[2]===""?(l.start1--,l.length1=1):f[2]=="0"?l.length1=0:(l.start1--,l.length1=parseInt(f[2],10)),l.start2=parseInt(f[3],10),f[4]===""?(l.start2--,l.length2=1):f[4]=="0"?l.length2=0:(l.start2--,l.length2=parseInt(f[4],10)),u++;while(u<o.length){var c=o[u].charAt(0);try{var h=decodeURI(o[u].substring(1))}catch(p){throw new Error("Illegal escape in patch_fromText: "+h)}if(c=="-")l.diffs.push([t,h]);else if(c=="+")l.diffs.push([n,h]);else if(c==" ")l.diffs.push([r,h]);else{if(c=="@")break;if(c!=="")throw new Error('Invalid patch mode "'+c+'" in: '+h)}u++}}return s},i.prototype.toString=function(){var e,i;this.length1===0?e=this.start1+",0":this.length1==1?e=this.start1+1:e=this.start1+1+","+this.length1,this.length2===0?i=this.start2+",0":this.length2==1?i=this.start2+1:i=this.start2+1+","+this.length2;var s=["@@ -"+e+" +"+i+" @@\n"],o;for(var u=0;u<this.diffs.length;u++){switch(this.diffs[u][0]){case n:o="+";break;case t:o="-";break;case r:o=" "}s[u+1]=o+encodeURI(this.diffs[u][1
])+"\n"}return s.join("").replace(/%20/g," ")},window.diff_match_patch=e,window.patch_obj=i,window.DIFF_DELETE=t,window.DIFF_INSERT=n,window.DIFF_EQUAL=r